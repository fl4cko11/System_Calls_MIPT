#!/bin/bash
# Скрипт для рекурсивного обхода директорий с отображением файлов и поддиректорий.

# Принимаем два аргумента:
# $1 - путь к директории
# $2 - уровень вложенности (максимальная глубина обхода)

# Функция для рекурсивного обхода директорий
function traverse() {
    local dir=$1    # Директория, которую мы обрабатываем
    local depth=$2  # Уровень вложенности, который мы ограничиваем
    local indent=$3 # Строка с отступами (тире)

    # Проверяем, если глубина вложенности достигнута, выходим
    if [ $depth -le 0 ]; then
        return
    fi

    # Получаем список файлов и поддиректорий в указанной директории
    local files=$(ls "$dir")
    
    # Цикл для обработки каждого элемента в директории
    for word in $files
    do
        # Печатаем текущий элемент с отступами
        echo "$indent$word"
        
        # Если элемент является директорией, рекурсивно обрабатываем её
        if [ -d "$dir/$word" ]; then
            # Увеличиваем отступы (добавляем еще тире) и уменьшаем глубину
            traverse "$dir/$word" $((depth - 1)) "$indent-"
        fi
    done
}

# Начинаем с вызова функции traverse для указанной директории и глубины
traverse "$1" $2 "|"
